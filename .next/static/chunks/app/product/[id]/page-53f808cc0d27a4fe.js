(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:u,className:l="",children:d,...c},m)=>(0,n.createElement)("svg",{ref:m,...i,width:a,height:a,stroke:r,strokeWidth:u?24*Number(o)/Number(a):o,className:["lucide",`lucide-${s(e)}`,l].join(" "),...c},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},2442:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3505:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},4232:function(e,t,r){Promise.resolve().then(r.bind(r,9836)),Promise.resolve().then(r.t.bind(r,8326,23))},9836:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductDetails:function(){return f}});var n=r(7437),i=r(2265),s=r(3611),a=r(5831),o=r(70),u=r(6131),l=r(6270),d=r(4033),c=r(2442),m=r(3505);function f(e){var t;let{product:r}=e,{supabase:f}=(0,o.useSupabase)(),{user:g}=(0,u.t)(),{addToCart:h}=(0,l.x)(),p=(0,d.useRouter)(),[v,x]=(0,i.useState)(1),[b,y]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),N=async()=>{if(!g){p.push("/auth?redirect=/product/".concat(r.id));return}y(!0);try{h(r,v),j(!0),setTimeout(()=>j(!1),2e3)}catch(e){console.error("Error adding to cart:",e),alert("Failed to add item to cart. Please try again.")}finally{y(!1)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:r.name}),(0,n.jsxs)("div",{className:"flex items-center mt-2",children:[(0,n.jsx)("div",{className:"text-sm px-2 py-1 bg-muted rounded-md",children:null===(t=r.category)||void 0===t?void 0:t.name}),(0,n.jsxs)("div",{className:"ml-4 text-sm text-muted-foreground",children:["SKU: ",r.sku||"N/A"]})]})]}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:["$",r.price.toFixed(2)]}),(0,n.jsx)("div",{className:"prose max-w-none dark:prose-invert",children:(0,n.jsx)("p",{children:r.description||"No description available."})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:"Quantity"}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(s.z,{variant:"outline",size:"icon",className:"h-10 w-10",onClick:()=>v>1&&x(v-1),disabled:b,children:"-"}),(0,n.jsx)(a.I,{type:"number",value:v,onChange:e=>{let t=parseInt(e.target.value);t>0&&x(t)},className:"h-10 w-20 mx-2 text-center",min:1,disabled:b}),(0,n.jsx)(s.z,{variant:"outline",size:"icon",className:"h-10 w-10",onClick:()=>x(v+1),disabled:b,children:"+"})]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)(s.z,{className:"flex-1",onClick:N,disabled:b||w,children:w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Added to Cart"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Add to Cart"]})})}),(0,n.jsx)("div",{className:"border-t pt-6 mt-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-1",children:"Availability"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:r.stock>0?"In Stock":"Out of Stock"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-1",children:"Shipping"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Free shipping on orders over $100"})]})]})})]})}},70:function(e,t,r){"use strict";r.r(t),r.d(t,{SupabaseProvider:function(){return o},useSupabase:function(){return u}});var n=r(7437),i=r(2265),s=r(4421);let a=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[r]=(0,i.useState)(()=>(0,s.e)());return(0,n.jsx)(a.Provider,{value:{supabase:r},children:t})}let u=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},3611:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(7437),i=r(2265),s=r(7256),a=r(6061),o=r(1628);let u=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:r,variant:i,size:a,asChild:l=!1,...d}=e,c=l?s.g7:"button";return(0,n.jsx)(c,{className:(0,o.cn)(u({variant:i,size:a,className:r})),ref:t,...d})});l.displayName="Button"},5831:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(7437),i=r(2265),s=r(1628);let a=i.forwardRef((e,t)=>{let{className:r,type:i,...a}=e;return(0,n.jsx)("input",{type:i,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});a.displayName="Input"},6131:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var n=r(9115),i=r(4421);let s=(0,n.U)((e,t)=>({user:null,isLoading:!1,error:null,login:async(t,r)=>{try{e({isLoading:!0,error:null});let n=(0,i.e)(),{data:s,error:a}=await n.auth.signInWithPassword({email:t,password:r});if(a)return e({error:a.message,isLoading:!1}),!1;if(s.user){let{data:t}=await n.from("profiles").select("name, role").eq("id",s.user.id).single();return e({user:{id:s.user.id,email:s.user.email,name:(null==t?void 0:t.name)||"User",role:(null==t?void 0:t.role)||"user"},isLoading:!1}),!0}return e({isLoading:!1}),!1}catch(t){return e({error:t.message,isLoading:!1}),!1}},signup:async(t,r,n)=>{try{e({isLoading:!0,error:null});let s=(0,i.e)(),{data:a,error:o}=await s.auth.signUp({email:t,password:r});if(o)return e({error:o.message,isLoading:!1}),!1;if(a.user)return await s.from("profiles").insert({id:a.user.id,name:n,role:"user"}),e({user:{id:a.user.id,email:a.user.email,name:n,role:"user"},isLoading:!1}),!0;return e({isLoading:!1}),!1}catch(t){return e({error:t.message,isLoading:!1}),!1}},logout:async()=>{let t=(0,i.e)();await t.auth.signOut(),e({user:null})},checkAuth:async()=>{try{e({isLoading:!0});let t=(0,i.e)(),{data:r}=await t.auth.getUser();if(r.user){let{data:n}=await t.from("profiles").select("name, role").eq("id",r.user.id).single();return e({user:{id:r.user.id,email:r.user.email,name:(null==n?void 0:n.name)||"User",role:(null==n?void 0:n.role)||"user"}}),!0}return e({user:null}),!1}catch(t){return e({user:null}),!1}finally{e({isLoading:!1})}}}))},6270:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(9115),i=r(4810),s=r(4421);let a=(0,n.U)()((0,i.tJ)((e,t)=>({items:[],isLoading:!1,error:null,addToCart:(r,n)=>{let{items:i}=t(),s=i.find(e=>e.product_id===r.id);s?e({items:i.map(e=>e.product_id===r.id?{...e,quantity:e.quantity+n}:e)}):e({items:[...i,{id:crypto.randomUUID(),product_id:r.id,quantity:n,price:r.price,name:r.name,image_url:r.image_url}]})},removeFromCart:r=>{let{items:n}=t();e({items:n.filter(e=>e.product_id!==r)})},updateQuantity:(r,n)=>{let{items:i}=t();if(n<=0){e({items:i.filter(e=>e.product_id!==r)});return}e({items:i.map(e=>e.product_id===r?{...e,quantity:n}:e)})},clearCart:()=>{e({items:[]})},getCartTotal:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.price*t.quantity,0)},getItemCount:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.quantity,0)},checkout:async(r,n)=>{let{items:i,clearCart:a,getCartTotal:o}=t(),u=(0,s.e)(),{data:{user:l}}=await u.auth.getUser();if(!l)return{success:!1,error:"You must be logged in to checkout"};if(0===i.length)return{success:!1,error:"Your cart is empty"};try{e({isLoading:!0,error:null});let{data:t,error:s}=await u.from("orders").insert({user_id:l.id,status:"pending",total_amount:o(),shipping_address:r,payment_status:"pending",payment_method:n}).select("id").single();if(s)throw s;let d=i.map(e=>({order_id:t.id,product_id:e.product_id,quantity:e.quantity,price:e.price})),{error:c}=await u.from("order_items").insert(d);if(c)throw c;return a(),{success:!0,orderId:t.id}}catch(t){return console.error("Checkout error:",t),e({error:t.message}),{success:!1,error:t.message}}finally{e({isLoading:!1})}}}),{name:"cart-storage"}))},4421:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var n=r(4756);let i=()=>{let e="https://your-supabase-url.supabase.co",t="your-supabase-anon-key";return e&&t?(0,n.eI)(e,t):(console.error("Supabase URL or Anon Key is missing"),{auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signOut:()=>Promise.resolve({error:null})},from:()=>({select:()=>({eq:()=>Promise.resolve({data:[],error:null}),order:()=>Promise.resolve({data:[],error:null})})})})}},1628:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},dI:function(){return u},p6:function(){return o},xG:function(){return a}});var n=r(7042),i=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}function a(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function u(){return"ORD-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))}},4033:function(e,t,r){e.exports=r(94)},4810:function(e,t,r){"use strict";r.d(t,{tJ:function(){return i}});let n=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>n(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>n(t)(e)}}},i=(e,t)=>(r,i,s)=>{let a,o={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(n=r.getItem(e))?n:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},u=!1,l=new Set,d=new Set,c=o.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},i,s);let m=()=>{let e=o.partialize({...i()});return c.setItem(o.name,{state:e,version:o.version})},f=s.setState;s.setState=(e,t)=>{f(e,t),m()};let g=e((...e)=>{r(...e),m()},i,s);s.getInitialState=()=>g;let h=()=>{var e,t;if(!c)return;u=!1,l.forEach(e=>{var t;return e(null!=(t=i())?t:g)});let s=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=i())?e:g))||void 0;return n(c.getItem.bind(c))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[n,s]=e;if(r(a=o.merge(s,null!=(t=i())?t:g),!0),n)return m()}).then(()=>{null==s||s(a,void 0),a=i(),u=!0,d.forEach(e=>e(a))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>h(),hasHydrated:()=>u,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||h(),a||g}},9115:function(e,t,r){"use strict";r.d(t,{U:function(){return u}});var n=r(2265);let i=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,s);return s},s=e=>e?i(e):i,a=e=>e,o=e=>{let t=s(e),r=e=>(function(e,t=a){let r=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},u=e=>e?o(e):o}},function(e){e.O(0,[533,326,542,971,472,744],function(){return e(e.s=4232)}),_N_E=e.O()}]);