(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{2898:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,r)=>{let t=(0,n.forwardRef)(({color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:l="",children:c,...u},f)=>(0,n.createElement)("svg",{ref:f,...i,width:a,height:a,stroke:t,strokeWidth:d?24*Number(o)/Number(a):o,className:["lucide",`lucide-${s(e)}`,l].join(" "),...u},[...r.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(c)?c:[c]]));return t.displayName=`${e}`,t}},5367:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},812:function(e,r,t){Promise.resolve().then(t.bind(t,2712)),Promise.resolve().then(t.bind(t,921))},2712:function(e,r,t){"use strict";t.r(r),t.d(r,{CartItems:function(){return f}});var n=t(7437),i=t(2265),s=t(1396),a=t.n(s),o=t(3611),d=t(5831),l=t(70),c=t(4033),u=t(5367);function f(e){let{items:r}=e,{supabase:t}=(0,l.useSupabase)(),s=(0,c.useRouter)(),[f,m]=(0,i.useState)({}),h=async(e,r)=>{if(!(r<1)){m(r=>({...r,[e]:!0}));try{let{error:n}=await t.from("cart_items").update({quantity:r}).eq("id",e);if(n)throw n;s.refresh()}catch(e){console.error("Error updating cart item:",e)}finally{m(r=>({...r,[e]:!1}))}}},x=async e=>{m(r=>({...r,[e]:!0}));try{let{error:r}=await t.from("cart_items").delete().eq("id",e);if(r)throw r;s.refresh()}catch(e){console.error("Error removing cart item:",e)}finally{m(r=>({...r,[e]:!1}))}};return 0===r.length?(0,n.jsxs)("div",{className:"text-center py-12 border rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Your cart is empty"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-6",children:"Add items to your cart to see them here."}),(0,n.jsx)(o.z,{asChild:!0,children:(0,n.jsx)(a(),{href:"/account",children:"Continue Shopping"})})]}):(0,n.jsx)("div",{className:"rounded-lg border",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,n.jsx)("th",{className:"text-left font-medium py-3 px-4",children:"Product"}),(0,n.jsx)("th",{className:"text-center font-medium py-3 px-4",children:"Quantity"}),(0,n.jsx)("th",{className:"text-right font-medium py-3 px-4",children:"Price"}),(0,n.jsx)("th",{className:"text-right font-medium py-3 px-4",children:"Total"}),(0,n.jsx)("th",{className:"text-right font-medium py-3 px-4",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:r.map(e=>{var r;return(0,n.jsxs)("tr",{className:"border-b last:border-0",children:[(0,n.jsx)("td",{className:"py-4 px-4",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-muted rounded flex-shrink-0 mr-4",children:e.product.image_url?(0,n.jsx)("div",{className:"h-full w-full bg-cover bg-center rounded",style:{backgroundImage:"url(".concat(e.product.image_url,")")}}):(0,n.jsx)("div",{className:"h-full w-full flex items-center justify-center text-muted-foreground text-xs",children:"No img"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a(),{href:"/product/".concat(e.product.id),className:"font-medium hover:underline",children:e.product.name}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:null===(r=e.product.category)||void 0===r?void 0:r.name})]})]})}),(0,n.jsx)("td",{className:"py-4 px-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)(o.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>h(e.id,e.quantity-1),disabled:f[e.id]||e.quantity<=1,children:"-"}),(0,n.jsx)(d.I,{type:"number",value:e.quantity,onChange:r=>h(e.id,parseInt(r.target.value)),className:"h-8 w-16 mx-2 text-center",min:1,disabled:f[e.id]}),(0,n.jsx)(o.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>h(e.id,e.quantity+1),disabled:f[e.id],children:"+"})]})}),(0,n.jsxs)("td",{className:"py-4 px-4 text-right",children:["$",e.product.price.toFixed(2)]}),(0,n.jsxs)("td",{className:"py-4 px-4 text-right font-medium",children:["$",(e.product.price*e.quantity).toFixed(2)]}),(0,n.jsx)("td",{className:"py-4 px-4 text-right",children:(0,n.jsxs)(o.z,{variant:"ghost",size:"icon",onClick:()=>x(e.id),disabled:f[e.id],children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Remove"})]})})]},e.id)})})]})})})}},921:function(e,r,t){"use strict";t.r(r),t.d(r,{CartSummary:function(){return u}});var n=t(7437),i=t(2265),s=t(3611),a=t(9598),o=t(5057),d=t(70),l=t(4033),c=t(1628);function u(e){let{items:r}=e,{supabase:t}=(0,d.useSupabase)(),u=(0,l.useRouter)(),[f,m]=(0,i.useState)(!1),h=r.reduce((e,r)=>e+r.product.price*r.quantity,0),x=h>100?0:10,p=h+x,g=async()=>{if(0!==r.length){m(!0);try{let{data:{session:e}}=await t.auth.getSession();if(!e){u.push("/auth?redirect=/cart");return}let n=(0,c.dI)(),{error:i}=await t.from("orders").insert({id:n,user_id:e.user.id,total_amount:p,shipping_cost:x,status:"pending"});if(i)throw i;let s=r.map(e=>({order_id:n,product_id:e.product.id,quantity:e.quantity,price_per_unit:e.product.price})),{error:a}=await t.from("order_items").insert(s);if(a)throw a;let{error:o}=await t.from("cart_items").delete().eq("user_id",e.user.id);if(o)throw o;u.push("/orders/".concat(n))}catch(e){console.error("Error during checkout:",e),alert("There was an error processing your order. Please try again.")}finally{m(!1)}}};return(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Order Summary"})}),(0,n.jsxs)(a.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,n.jsxs)("span",{children:["$",h.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Shipping"}),(0,n.jsx)("span",{children:0===x?"Free":"$".concat(x.toFixed(2))})]}),(0,n.jsx)(o.Separator,{}),(0,n.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsxs)("span",{children:["$",p.toFixed(2)]})]}),h<100&&(0,n.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:["Add $",(100-h).toFixed(2)," more to qualify for free shipping."]})]}),(0,n.jsx)(a.eW,{children:(0,n.jsx)(s.z,{className:"w-full",onClick:g,disabled:f||0===r.length,children:f?"Processing...":"Proceed to Checkout"})})]})}},70:function(e,r,t){"use strict";t.r(r),t.d(r,{SupabaseProvider:function(){return o},useSupabase:function(){return d}});var n=t(7437),i=t(2265),s=t(4421);let a=(0,i.createContext)(void 0);function o(e){let{children:r}=e,[t]=(0,i.useState)(()=>(0,s.e)());return(0,n.jsx)(a.Provider,{value:{supabase:t},children:r})}let d=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},3611:function(e,r,t){"use strict";t.d(r,{z:function(){return l}});var n=t(7437),i=t(2265),s=t(7256),a=t(6061),o=t(1628);let d=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,r)=>{let{className:t,variant:i,size:a,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(d({variant:i,size:a,className:t})),ref:r,...c})});l.displayName="Button"},9598:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return a},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var n=t(7437),i=t(2265),s=t(1628);let a=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});a.displayName="Card";let o=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...i})});o.displayName="CardHeader";let d=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});d.displayName="CardTitle";let l=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...i})});l.displayName="CardDescription";let c=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...i})});c.displayName="CardContent";let u=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...i})});u.displayName="CardFooter"},5831:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var n=t(7437),i=t(2265),s=t(1628);let a=i.forwardRef((e,r)=>{let{className:t,type:i,...a}=e;return(0,n.jsx)("input",{type:i,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a})});a.displayName="Input"},5057:function(e,r,t){"use strict";t.r(r),t.d(r,{Separator:function(){return c}});var n=t(7437),i=t(2265),s=t(9381),a="horizontal",o=["horizontal","vertical"],d=i.forwardRef((e,r)=>{let{decorative:t,orientation:i=a,...d}=e,l=o.includes(i)?i:a;return(0,n.jsx)(s.WV.div,{"data-orientation":l,...t?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...d,ref:r})});d.displayName="Separator";var l=t(1628);let c=i.forwardRef((e,r)=>{let{className:t,orientation:i="horizontal",decorative:s=!0,...a}=e;return(0,n.jsx)(d,{ref:r,decorative:s,orientation:i,className:(0,l.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",t),...a})});c.displayName=d.displayName},4421:function(e,r,t){"use strict";t.d(r,{e:function(){return i}});var n=t(4756);let i=()=>{let e="https://your-supabase-url.supabase.co",r="your-supabase-anon-key";return e&&r?(0,n.eI)(e,r):(console.error("Supabase URL or Anon Key is missing"),{auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signOut:()=>Promise.resolve({error:null})},from:()=>({select:()=>({eq:()=>Promise.resolve({data:[],error:null}),order:()=>Promise.resolve({data:[],error:null})})})})}},1628:function(e,r,t){"use strict";t.d(r,{cn:function(){return s},dI:function(){return d},p6:function(){return o},xG:function(){return a}});var n=t(7042),i=t(4769);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.m6)((0,n.W)(r))}function a(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function d(){return"ORD-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))}},1396:function(e,r,t){e.exports=t(8326)},4033:function(e,r,t){e.exports=t(94)},9381:function(e,r,t){"use strict";t.d(r,{WV:function(){return a}});var n=t(2265);t(4887);var i=t(7256),s=t(7437),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let Node=n.forwardRef((e,t)=>{let{asChild:n,...a}=e,o=n?i.g7:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(o,{...a,ref:t})});return Node.displayName=`Primitive.${r}`,{...e,[r]:Node}},{})}},function(e){e.O(0,[533,326,542,971,472,744],function(){return e(e.s=812)}),_N_E=e.O()}]);