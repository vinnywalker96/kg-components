(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4430:function(e,r,t){Promise.resolve().then(t.t.bind(t,2853,23)),Promise.resolve().then(t.bind(t,2417)),Promise.resolve().then(t.bind(t,70)),Promise.resolve().then(t.bind(t,2175)),Promise.resolve().then(t.t.bind(t,8326,23)),Promise.resolve().then(t.t.bind(t,3925,23))},2417:function(e,r,t){"use strict";t.r(r),t.d(r,{Navbar:function(){return j}});var s=t(7437),n=t(2265),i=t(1396),a=t.n(i),o=t(4033),u=t(3611),c=t(6435),l=t(4135),d=t(3088);function m(){let{theme:e,setTheme:r}=(0,c.F)();return(0,s.jsxs)(u.z,{variant:"ghost",size:"icon",onClick:()=>r("light"===e?"dark":"light"),children:[(0,s.jsx)(l.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(d.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}var h=t(70),f=t(6131),x=t(6270),g=t(3505),p=t(7972),b=t(5883),v=t(2549),y=t(8004);function j(){let e=(0,o.usePathname)(),{supabase:r}=(0,h.useSupabase)(),{user:t}=(0,f.t)(),{getItemCount:i}=(0,x.x)(),[c,l]=(0,n.useState)(!1),[d,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)(0);(0,n.useEffect)(()=>{l(!1),j(!1)},[e]),(0,n.useEffect)(()=>{w(i())},[i]);let k=async()=>{await r.auth.signOut()},_=(null==t?void 0:t.role)==="admin";return(0,s.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a(),{href:"/",className:"text-xl font-bold mr-8",children:"KG-Components"}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,s.jsx)(a(),{href:"/",className:"text-sm font-medium transition-colors hover:text-primary ".concat("/"===e?"text-foreground":"text-muted-foreground"),children:"Home"}),(0,s.jsx)(a(),{href:"/shop",className:"text-sm font-medium transition-colors hover:text-primary ".concat("/shop"===e?"text-foreground":"text-muted-foreground"),children:"Shop"}),(0,s.jsx)(a(),{href:"/about",className:"text-sm font-medium transition-colors hover:text-primary ".concat("/about"===e?"text-foreground":"text-muted-foreground"),children:"About"}),(0,s.jsx)(a(),{href:"/contact",className:"text-sm font-medium transition-colors hover:text-primary ".concat("/contact"===e?"text-foreground":"text-muted-foreground"),children:"Contact"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(m,{}),t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{href:"/cart",children:(0,s.jsxs)(u.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"}),N>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground text-xs rounded-full h-5 w-5 flex items-center justify-center",children:N})]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>j(!d),children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})}),d&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-card rounded-md shadow-lg border overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 py-2 border-b",children:(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:t.email})}),(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)(a(),{href:"/account",className:"block px-4 py-2 text-sm hover:bg-muted",children:"My Account"}),(0,s.jsx)(a(),{href:"/orders",className:"block px-4 py-2 text-sm hover:bg-muted",children:"My Orders"}),_&&(0,s.jsx)(a(),{href:"/admin",className:"block px-4 py-2 text-sm hover:bg-muted",children:"Admin Dashboard"}),(0,s.jsxs)("button",{onClick:k,className:"w-full text-left px-4 py-2 text-sm hover:bg-muted flex items-center",children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})]})]}):(0,s.jsx)(u.z,{asChild:!0,variant:"default",size:"sm",children:(0,s.jsx)(a(),{href:"/auth",children:"Sign In"})}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>l(!c),children:c?(0,s.jsx)(v.Z,{className:"h-6 w-6"}):(0,s.jsx)(y.Z,{className:"h-6 w-6"})})]})]})}),c&&(0,s.jsx)("div",{className:"md:hidden border-t",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4 space-y-4",children:[(0,s.jsx)(a(),{href:"/",className:"block py-2 text-base font-medium",children:"Home"}),(0,s.jsx)(a(),{href:"/shop",className:"block py-2 text-base font-medium",children:"Shop"}),(0,s.jsx)(a(),{href:"/about",className:"block py-2 text-base font-medium",children:"About"}),(0,s.jsx)(a(),{href:"/contact",className:"block py-2 text-base font-medium",children:"Contact"})]})})]})}},70:function(e,r,t){"use strict";t.r(r),t.d(r,{SupabaseProvider:function(){return o},useSupabase:function(){return u}});var s=t(7437),n=t(2265),i=t(4421);let a=(0,n.createContext)(void 0);function o(e){let{children:r}=e,[t]=(0,n.useState)(()=>(0,i.e)());return(0,s.jsx)(a.Provider,{value:{supabase:t},children:r})}let u=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},2175:function(e,r,t){"use strict";t.r(r),t.d(r,{ThemeProvider:function(){return i}});var s=t(7437);t(2265);var n=t(6435);function i(e){let{children:r,...t}=e;return(0,s.jsx)(n.f,{...t,children:r})}},3611:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var s=t(7437),n=t(2265),i=t(7256),a=t(6061),o=t(1628);let u=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:c=!1,...l}=e,d=c?i.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(u({variant:n,size:a,className:t})),ref:r,...l})});c.displayName="Button"},6131:function(e,r,t){"use strict";t.d(r,{t:function(){return i}});var s=t(9115),n=t(4421);let i=(0,s.U)((e,r)=>({user:null,isLoading:!1,error:null,login:async(r,t)=>{try{e({isLoading:!0,error:null});let s=(0,n.e)(),{data:i,error:a}=await s.auth.signInWithPassword({email:r,password:t});if(a)return e({error:a.message,isLoading:!1}),!1;if(i.user){let{data:r}=await s.from("profiles").select("name, role").eq("id",i.user.id).single();return e({user:{id:i.user.id,email:i.user.email,name:(null==r?void 0:r.name)||"User",role:(null==r?void 0:r.role)||"user"},isLoading:!1}),!0}return e({isLoading:!1}),!1}catch(r){return e({error:r.message,isLoading:!1}),!1}},signup:async(r,t,s)=>{try{e({isLoading:!0,error:null});let i=(0,n.e)(),{data:a,error:o}=await i.auth.signUp({email:r,password:t});if(o)return e({error:o.message,isLoading:!1}),!1;if(a.user)return await i.from("profiles").insert({id:a.user.id,name:s,role:"user"}),e({user:{id:a.user.id,email:a.user.email,name:s,role:"user"},isLoading:!1}),!0;return e({isLoading:!1}),!1}catch(r){return e({error:r.message,isLoading:!1}),!1}},logout:async()=>{let r=(0,n.e)();await r.auth.signOut(),e({user:null})},checkAuth:async()=>{try{e({isLoading:!0});let r=(0,n.e)(),{data:t}=await r.auth.getUser();if(t.user){let{data:s}=await r.from("profiles").select("name, role").eq("id",t.user.id).single();return e({user:{id:t.user.id,email:t.user.email,name:(null==s?void 0:s.name)||"User",role:(null==s?void 0:s.role)||"user"}}),!0}return e({user:null}),!1}catch(r){return e({user:null}),!1}finally{e({isLoading:!1})}}}))},6270:function(e,r,t){"use strict";t.d(r,{x:function(){return a}});var s=t(9115),n=t(4810),i=t(4421);let a=(0,s.U)()((0,n.tJ)((e,r)=>({items:[],isLoading:!1,error:null,addToCart:(t,s)=>{let{items:n}=r(),i=n.find(e=>e.product_id===t.id);i?e({items:n.map(e=>e.product_id===t.id?{...e,quantity:e.quantity+s}:e)}):e({items:[...n,{id:crypto.randomUUID(),product_id:t.id,quantity:s,price:t.price,name:t.name,image_url:t.image_url}]})},removeFromCart:t=>{let{items:s}=r();e({items:s.filter(e=>e.product_id!==t)})},updateQuantity:(t,s)=>{let{items:n}=r();if(s<=0){e({items:n.filter(e=>e.product_id!==t)});return}e({items:n.map(e=>e.product_id===t?{...e,quantity:s}:e)})},clearCart:()=>{e({items:[]})},getCartTotal:()=>{let{items:e}=r();return e.reduce((e,r)=>e+r.price*r.quantity,0)},getItemCount:()=>{let{items:e}=r();return e.reduce((e,r)=>e+r.quantity,0)},checkout:async(t,s)=>{let{items:n,clearCart:a,getCartTotal:o}=r(),u=(0,i.e)(),{data:{user:c}}=await u.auth.getUser();if(!c)return{success:!1,error:"You must be logged in to checkout"};if(0===n.length)return{success:!1,error:"Your cart is empty"};try{e({isLoading:!0,error:null});let{data:r,error:i}=await u.from("orders").insert({user_id:c.id,status:"pending",total_amount:o(),shipping_address:t,payment_status:"pending",payment_method:s}).select("id").single();if(i)throw i;let l=n.map(e=>({order_id:r.id,product_id:e.product_id,quantity:e.quantity,price:e.price})),{error:d}=await u.from("order_items").insert(l);if(d)throw d;return a(),{success:!0,orderId:r.id}}catch(r){return console.error("Checkout error:",r),e({error:r.message}),{success:!1,error:r.message}}finally{e({isLoading:!1})}}}),{name:"cart-storage"}))},4421:function(e,r,t){"use strict";t.d(r,{e:function(){return n}});var s=t(4756);let n=()=>{let e="https://your-supabase-url.supabase.co",r="your-supabase-anon-key";return e&&r?(0,s.eI)(e,r):(console.error("Supabase URL or Anon Key is missing"),{auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signOut:()=>Promise.resolve({error:null})},from:()=>({select:()=>({eq:()=>Promise.resolve({data:[],error:null}),order:()=>Promise.resolve({data:[],error:null})})})})}},1628:function(e,r,t){"use strict";t.d(r,{cn:function(){return i},dI:function(){return u},p6:function(){return o},xG:function(){return a}});var s=t(7042),n=t(4769);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,s.W)(r))}function a(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function u(){return"ORD-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))}},2853:function(){}},function(e){e.O(0,[533,326,542,246,971,472,744],function(){return e(e.s=4430)}),_N_E=e.O()}]);