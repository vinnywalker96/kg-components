(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{62898:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,r)=>{let t=(0,s.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:d,...u},m)=>(0,s.createElement)("svg",{ref:m,...a,width:n,height:n,stroke:t,strokeWidth:l?24*Number(c)/Number(n):c,className:["lucide",`lucide-${i(e)}`,o].join(" "),...u},[...r.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t}},41827:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var s=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},86712:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var s=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},63588:function(e,r,t){Promise.resolve().then(t.bind(t,50283))},50283:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var s=t(57437),a=t(2265),i=t(24033),n=t(94660),c=t(34421),l=t(45727);let o=(0,n.Ue)((e,r)=>({products:[],featuredProducts:[],categories:[],isLoading:!1,error:null,filters:{},fetchProducts:async t=>{e({isLoading:!0,error:null});try{let s=(0,c.e)(),a=t||r().filters,i=s.from("products").select("\n          *,\n          category:categories(id, name)\n        ");if(a.category_id&&(i=i.eq("category_id",a.category_id)),void 0!==a.price_min&&(i=i.gte("price",a.price_min)),void 0!==a.price_max&&(i=i.lte("price",a.price_max)),a.manufacturer&&(i=i.eq("manufacturer",a.manufacturer)),a.featured&&(i=i.eq("featured",!0)),a.search&&(i=i.or("name.ilike.%".concat(a.search,"%,description.ilike.%").concat(a.search,"%"))),a.sort_by)switch(a.sort_by){case"price_asc":i=i.order("price",{ascending:!0});break;case"price_desc":i=i.order("price",{ascending:!1});break;case"name_asc":default:i=i.order("name",{ascending:!0});break;case"name_desc":i=i.order("name",{ascending:!1});break;case"newest":i=i.order("created_at",{ascending:!1})}else i=i.order("name",{ascending:!0});let{data:n,error:l}=await i;if(l)throw l;e({products:n,isLoading:!1,filters:a})}catch(r){console.error("Error fetching products:",r),e({error:r.message,isLoading:!1}),(0,l.A)({title:"Error",description:"Failed to load products. Please try again.",variant:"destructive"})}},fetchFeaturedProducts:async()=>{e({isLoading:!0,error:null});try{let r=(0,c.e)(),{data:t,error:s}=await r.from("products").select("\n          *,\n          category:categories(id, name)\n        ").eq("featured",!0).limit(8);if(s)throw s;e({featuredProducts:t,isLoading:!1})}catch(r){console.error("Error fetching featured products:",r),e({error:r.message,isLoading:!1})}},fetchCategories:async()=>{e({isLoading:!0,error:null});try{let r=(0,c.e)(),{data:t,error:s}=await r.from("categories").select("\n          id,\n          name,\n          count:products(count)\n        ").order("name");if(s)throw s;let a=t.map(e=>{var r;return{id:e.id,name:e.name,count:(null===(r=e.count[0])||void 0===r?void 0:r.count)||0}});e({categories:a,isLoading:!1})}catch(r){console.error("Error fetching categories:",r),e({error:r.message,isLoading:!1})}},fetchProductById:async r=>{e({isLoading:!0,error:null});try{let t=(0,c.e)(),{data:s,error:a}=await t.from("products").select("\n          *,\n          category:categories(id, name)\n        ").eq("id",r).single();if(a)throw a;return e({isLoading:!1}),s}catch(r){return console.error("Error fetching product:",r),e({error:r.message,isLoading:!1}),null}},setFilters:t=>{let s=r().filters;e({filters:{...s,...t}}),r().fetchProducts({...s,...t})},clearFilters:()=>{e({filters:{}}),r().fetchProducts({})}}));var d=t(23611),u=t(49598),m=t(35217),f=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,f.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),x=(0,f.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var g=t(41827);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,f.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),p=(0,f.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var v=t(86712);function j(){let e=(0,i.useSearchParams)(),{products:r,categories:t,isLoading:n,filters:c,fetchProducts:l,fetchCategories:f,setFilters:j,clearFilters:N}=o(),b=function(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{r(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),[w,k]=(0,a.useState)("grid"),[S,_]=(0,a.useState)(!b),[T,A]=(0,a.useState)("");(0,a.useEffect)(()=>{let r=e.get("category");l(r?{category_id:r}:{}),f()},[e,l,f]);let E=e=>{j({category_id:e})},z=()=>{A(""),N()};return(0,s.jsxs)("div",{className:"container mx-auto py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Shop"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[b&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)(d.z,{variant:"outline",onClick:()=>{_(!S)},className:"w-full flex items-center justify-center",children:[(0,s.jsx)(h,{className:"mr-2 h-4 w-4"}),S?"Hide Filters":"Show Filters"]})}),S&&(0,s.jsx)("div",{className:"w-full md:w-64 space-y-6",children:(0,s.jsxs)(u.Zb,{className:"p-4",children:[(0,s.jsxs)("h2",{className:"font-medium mb-3 flex items-center",children:[(0,s.jsx)(x,{className:"mr-2 h-4 w-4"}),"Filters"]}),(0,s.jsx)(m.Separator,{className:"my-3"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Categories"}),(0,s.jsx)("div",{className:"space-y-1",children:t.map(e=>(0,s.jsxs)(d.z,{variant:c.category_id===e.id?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>E(e.id),children:[e.name," (",e.count,")"]},e.id))})]}),(0,s.jsx)(m.Separator,{}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full",onClick:z,children:"Clear Filters"})]})]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j({search:T})},className:"flex-1 flex",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search products...",value:T,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsx)(d.z,{type:"submit",className:"rounded-l-none",children:"Search"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.z,{variant:"grid"===w?"default":"outline",size:"icon",onClick:()=>k("grid"),children:(0,s.jsx)(y,{className:"h-4 w-4"})}),(0,s.jsx)(d.z,{variant:"list"===w?"default":"outline",size:"icon",onClick:()=>k("list"),children:(0,s.jsx)(p,{className:"h-4 w-4"})})]})]}),n?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,r)=>(0,s.jsxs)(u.Zb,{className:"overflow-hidden",children:[(0,s.jsx)("div",{className:"h-48 bg-gray-200 animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-1/2 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]},r))}):0===r.length?(0,s.jsxs)(u.Zb,{className:"p-8 text-center",children:[(0,s.jsx)(v.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"No products found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find any products matching your criteria."}),(0,s.jsx)(d.z,{onClick:z,children:"Clear Filters"})]}):"grid"===w?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>{var r;return(0,s.jsxs)(u.Zb,{className:"overflow-hidden",children:[(0,s.jsx)("div",{className:"h-48 bg-gray-100 bg-cover bg-center",style:{backgroundImage:e.image_url?"url(".concat(e.image_url,")"):"none"},children:!e.image_url&&(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"No image"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-medium line-clamp-1",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:(null===(r=e.category)||void 0===r?void 0:r.name)||"Uncategorized"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("div",{className:"font-bold",children:["R",e.price.toFixed(2)]}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",children:"View"})]})]})]},e.id)})}):(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>{var r;return(0,s.jsx)(u.Zb,{className:"overflow-hidden",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-32 h-32 bg-gray-100 bg-cover bg-center",style:{backgroundImage:e.image_url?"url(".concat(e.image_url,")"):"none"},children:!e.image_url&&(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"No image"})}),(0,s.jsxs)("div",{className:"p-4 flex-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:(null===(r=e.category)||void 0===r?void 0:r.name)||"Uncategorized"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:e.description||"No description available"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"font-bold",children:["R",e.price.toFixed(2)]}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",children:"View"})]})]})]})},e.id)})})]})]})]})}},23611:function(e,r,t){"use strict";t.d(r,{z:function(){return o}});var s=t(57437),a=t(2265),i=t(67256),n=t(96061),c=t(81628);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,r)=>{let{className:t,variant:a,size:n,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(l({variant:a,size:n,className:t})),ref:r,...d})});o.displayName="Button"},49598:function(e,r,t){"use strict";t.d(r,{Ol:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return l}});var s=t(57437),a=t(2265),i=t(81628);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});c.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},35217:function(e,r,t){"use strict";t.r(r),t.d(r,{Separator:function(){return c}});var s=t(57437),a=t(2265),i=t(26823),n=t(81628);let c=a.forwardRef((e,r)=>{let{className:t,orientation:a="horizontal",decorative:c=!0,...l}=e;return(0,s.jsx)(i.f,{ref:r,decorative:c,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...l})});c.displayName=i.f.displayName},45727:function(e,r,t){"use strict";t.d(r,{A:function(){return u},p:function(){return m}});var s=t(2265);let a={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},i=0,n=new Map,c=(e,r)=>{switch(r.type){case a.ADD_TOAST:return{...e,toasts:[r.toast,...e.toasts].slice(0,5)};case a.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case a.DISMISS_TOAST:{let{toastId:t}=r;return t?f(t):e.toasts.forEach(e=>{f(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case a.REMOVE_TOAST:if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],o={toasts:[]};function d(e){o=c(o,e),l.forEach(e=>{e(o)})}function u(e){let{...r}=e,t=(i=(i+1)%Number.MAX_VALUE).toString(),s=()=>d({type:a.DISMISS_TOAST,toastId:t});return d({type:a.ADD_TOAST,toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:a.UPDATE_TOAST,toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(o);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:a.DISMISS_TOAST,toastId:e})}}function f(e){if(n.has(e))return;let r=setTimeout(()=>{n.delete(e),d({type:a.REMOVE_TOAST,toastId:e})},1e6);n.set(e,r)}},34421:function(e,r,t){"use strict";t.d(r,{e:function(){return a}});var s=t(84756);let a=()=>{let e="https://your-supabase-url.supabase.co",r="your-supabase-anon-key";if(!e||!r)throw Error("Missing Supabase environment variables");return(0,s.eI)(e,r)}},81628:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var s=t(57042),a=t(74769);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,s.W)(r))}},26823:function(e,r,t){"use strict";t.d(r,{f:function(){return o}});var s=t(2265),a=t(9381),i=t(57437),n="horizontal",c=["horizontal","vertical"],l=s.forwardRef((e,r)=>{let{decorative:t,orientation:s=n,...l}=e,o=c.includes(s)?s:n;return(0,i.jsx)(a.WV.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...l,ref:r})});l.displayName="Separator";var o=l}},function(e){e.O(0,[895,811,971,472,744],function(){return e(e.s=63588)}),_N_E=e.O()}]);