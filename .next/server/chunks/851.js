"use strict";exports.id=851,exports.ids=[851],exports.modules={220:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{Z:()=>l});var s=a(20997),i=a(16689),o=a(39332),n=a(16736),d=e([n]);n=(d.then?(await d)():d)[0];let l=({children:e,adminOnly:r=!1})=>{let a=(0,o.useRouter)(),{user:t,profile:d,isLoading:l}=(0,n.t)();return((0,i.useEffect)(()=>{l||t?l||!r||d?.is_admin||a.push("/"):a.push("/auth?redirect="+encodeURIComponent(window.location.pathname))},[t,d,l,a,r]),l)?s.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t&&(!r||d?.is_admin)?s.jsx(s.Fragment,{children:e}):null};t()}catch(e){t(e)}})},82730:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{z:()=>u});var s=a(20997),i=a(16689),o=a(14338),n=a(16926),d=a(95693),l=e([o,n,d]);[o,n,d]=l.then?(await l)():l;let c=(0,n.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef(({className:e,variant:r,size:a,asChild:t=!1,...i},n)=>{let l=t?o.Slot:"button";return s.jsx(l,{className:(0,d.cn)(c({variant:r,size:a,className:e})),ref:n,...i})});u.displayName="Button",t()}catch(e){t(e)}})},51330:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{Ol:()=>l,Zb:()=>d,aY:()=>f,ll:()=>c});var s=a(20997),i=a(16689),o=a(95693),n=e([o]);o=(n.then?(await n)():n)[0];let d=i.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));d.displayName="Card";let l=i.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let c=i.forwardRef(({className:e,...r},a)=>s.jsx("h3",{ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));c.displayName="CardTitle";let u=i.forwardRef(({className:e,...r},a)=>s.jsx("p",{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...r}));u.displayName="CardDescription";let f=i.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,o.cn)("p-6 pt-0",e),...r}));f.displayName="CardContent";let g=i.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",e),...r}));g.displayName="CardFooter",t()}catch(e){t(e)}})},41356:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{O:()=>n});var s=a(20997),i=a(95693),o=e([i]);function n({className:e,...r}){return s.jsx("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",e),...r})}i=(o.then?(await o)():o)[0],t()}catch(e){t(e)}})},33365:(e,r,a)=>{a.d(r,{O:()=>s});var t=a(92885);let s=(0,t.createClient)("https://your-supabase-url.supabase.co","your-supabase-anon-key")},95693:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{cn:()=>n});var s=a(16593),i=a(68097),o=e([s,i]);function n(...e){return(0,i.twMerge)((0,s.clsx)(e))}[s,i]=o.then?(await o)():o,t()}catch(e){t(e)}})},16736:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{t:()=>n});var s=a(66912),i=a(33365),o=e([s]);s=(o.then?(await o)():o)[0];let n=(0,s.create)((e,r)=>({user:null,profile:null,isLoading:!0,error:null,initialize:async()=>{try{e({isLoading:!0});let{data:{session:r}}=await i.O.auth.getSession();if(!r){e({user:null,profile:null,isLoading:!1});return}let{data:a,error:t}=await i.O.from("user_profiles").select("*").eq("id",r.user.id).single();if(t){console.error("Error fetching profile:",t),e({user:r.user,profile:null,isLoading:!1});return}e({user:r.user,profile:a,isLoading:!1})}catch(r){console.error("Auth initialization error:",r),e({user:null,profile:null,isLoading:!1})}},signIn:async(r,a)=>{try{e({isLoading:!0,error:null});let{data:t,error:s}=await i.O.auth.signInWithPassword({email:r,password:a});if(s)return e({isLoading:!1,error:s.message}),{success:!1,error:s.message};let{data:o,error:n}=await i.O.from("user_profiles").select("*").eq("id",t.user.id).single();return n&&console.error("Error fetching profile:",n),e({user:t.user,profile:o,isLoading:!1}),{success:!0}}catch(r){return e({isLoading:!1,error:r.message}),{success:!1,error:r.message}}},signUp:async(r,a,t)=>{try{e({isLoading:!0,error:null});let{data:s,error:o}=await i.O.auth.signUp({email:r,password:a,options:{data:{full_name:t}}});if(o)return e({isLoading:!1,error:o.message}),{success:!1,error:o.message};if(s.user){let{error:e}=await i.O.from("user_profiles").insert([{id:s.user.id,full_name:t,email:r,is_admin:!1}]);e&&console.error("Error creating profile:",e)}return e({user:s.user,profile:s.user?{id:s.user.id,full_name:t,email:r,address:null,phone:null,is_admin:!1,created_at:new Date().toISOString()}:null,isLoading:!1}),{success:!0}}catch(r){return e({isLoading:!1,error:r.message}),{success:!1,error:r.message}}},signOut:async()=>{try{e({isLoading:!0}),await i.O.auth.signOut(),e({user:null,profile:null,isLoading:!1})}catch(r){console.error("Sign out error:",r),e({isLoading:!1})}},updateProfile:async a=>{try{let{profile:t}=r();if(!t)throw Error("No profile found");e({isLoading:!0});let{error:s}=await i.O.from("user_profiles").update(a).eq("id",t.id);if(s)throw s;e({profile:{...t,...a},isLoading:!1})}catch(r){console.error("Update profile error:",r),e({isLoading:!1})}}}));t()}catch(e){t(e)}})},75786:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.d(r,{L:()=>n});var s=a(66912),i=a(33365),o=e([s]);s=(o.then?(await o)():o)[0];let n=(0,s.create)((e,r)=>({orders:[],currentOrder:null,isLoading:!1,error:null,fetchUserOrders:async r=>{try{e({isLoading:!0,error:null});let{data:a,error:t}=await i.O.from("orders").select(`
          *,
          items:order_items(
            *,
            product:products(name, image_url)
          )
        `).eq("user_id",r).order("created_at",{ascending:!1});if(t)throw t;e({orders:a,isLoading:!1})}catch(r){console.error("Fetch user orders error:",r),e({isLoading:!1,error:r.message})}},fetchAllOrders:async()=>{try{e({isLoading:!0,error:null});let{data:r,error:a}=await i.O.from("orders").select(`
          *,
          user:user_profiles(
            id,
            full_name,
            email
          ),
          items:order_items(
            *,
            product:products(name, image_url)
          )
        `).order("created_at",{ascending:!1});if(a)throw a;e({orders:r,isLoading:!1})}catch(r){console.error("Fetch all orders error:",r),e({isLoading:!1,error:r.message})}},fetchOrderById:async r=>{try{e({isLoading:!0,error:null});let{data:a,error:t}=await i.O.from("orders").select(`
          *,
          user:user_profiles(
            id,
            full_name,
            email
          ),
          items:order_items(
            *,
            product:products(name, image_url)
          )
        `).eq("id",r).single();if(t)throw t;e({currentOrder:a,isLoading:!1})}catch(r){console.error("Fetch order by ID error:",r),e({isLoading:!1,error:r.message})}},updateOrderStatus:async(a,t)=>{try{e({isLoading:!0,error:null});let{error:s}=await i.O.from("orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",a);if(s)throw s;let{orders:o,currentOrder:n}=r(),d=o.map(e=>e.id===a?{...e,status:t,updated_at:new Date().toISOString()}:e),l=n&&n.id===a?{...n,status:t,updated_at:new Date().toISOString()}:n;e({orders:d,currentOrder:l,isLoading:!1})}catch(r){console.error("Update order status error:",r),e({isLoading:!1,error:r.message})}},confirmPayment:async a=>{try{e({isLoading:!0,error:null});let{error:t}=await i.O.from("orders").update({payment_status:"paid",updated_at:new Date().toISOString()}).eq("id",a);if(t)throw t;let{orders:s,currentOrder:o}=r(),n=s.map(e=>e.id===a?{...e,payment_status:"paid",updated_at:new Date().toISOString()}:e),d=o&&o.id===a?{...o,payment_status:"paid",updated_at:new Date().toISOString()}:o;e({orders:n,currentOrder:d,isLoading:!1})}catch(r){console.error("Confirm payment error:",r),e({isLoading:!1,error:r.message})}},sendInvoice:async r=>{try{e({isLoading:!0,error:null});let{error:a}=await i.O.functions.invoke("send-invoice",{body:{orderId:r}});if(a)throw a;e({isLoading:!1})}catch(r){console.error("Send invoice error:",r),e({isLoading:!1,error:r.message})}}}));t()}catch(e){t(e)}})}};